Status: draft
Title: nodejs + pdfkitを利用してpdfを自動生成する。
Date: 2014-07-14 16:00
Category: nodejs 
Tags: nodejs, pdfkit
Slug: nodejspdfkit
Author: youske
Summary: nodejs+pdfkitを用いたPDFの作成について

# はじめに
1. 簡単なページ構成を決める。
2. PDFKit用のスクリプトを用意
3. 特定のドキュメントにデータを配置してPDFデータを生成
4. 日本語フォントについて
5. 本としての体裁を整える。

## 簡単なページ構成を決める。

databaseへの読み書きを直接行うよりもORMを利用すると何かと便利そうです。
nodejsの中でも幾つかORMのソフトウェアはありますが、adapterが用意されているjugglingDBを利用します。

## PDFKit用のスクリプトを用意
おおむね次のような感じ

## 特定のドキュメントにデータを配置してPDFデータを生成

'''
var Schema = require('jugglingdb').Schema;


var testmodel = shema.define( 'Test',{

});
schema.autoupdate();

testmodel.create();

'''

## 日本語フォントについて
redisをセッションキャッシュにする。


## 本としての体裁を整える。

npm install connect-redis

RedisStore = require('connect-redis')(express);

app.use(express.cookieParser());
app.use(express.session({
  secret:"oyoyoyoyo",
  store:new RedisStore(),
  cookie: {maxAge: 86400 * 1000}
});
app.use(app.router);






一応構想

appサーバはpm2によるプロセスの管理を利用する。
セッションキャッシュ


