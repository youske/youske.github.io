Status: draft
Title: コントローラのスコープ外からメンバーを参照、変更する。
Date: 2014-05-29 11:00
Category: angularjs
Tags: angularjs, element,  tips
Slug: angularjsexterncontroller
Author: youske
Summary: コントローラのスコープ外からメンバーを参照、変更する。

# 概要
angularjsのスコープ外からコントローラに対して参照、変更をかけるやり方です。
これを行う主な使い道として

* 別なライブラリから取得できる値をcontrollerに渡したい。
* 直接値を参照したい。


参考:
http://www.fine-der.net/angularjs%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%A9%E3%83%BC%E5%A4%96%E3%81%AE%E9%96%A2%E6%95%B0%E3%81%8B%E3%82%89%E3%80%81%E4%BB%96%E3%81%AE%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC/

# 行ったこと

angular.element関数を利用する。
この関数を利用することによってどこからでもangulerが管理する要素を取得することができる。

## 値の参照方法

    function getValue( elementname ) {
      var escope = angular.element( elementname ).scope();
      if( typeof escope != "undefined" ) {
        console.log( escope.member ); // controller内にある $scope.<メンバー名>　
        return escope.member;
      }
      return 'undefined';
    }



## 値の変更方法
angularjs側で更新のタイミングがあるため、直接引っ張りだして、書き換えても反映が行われない。
そこで$applyを利用する。

    function setValue( elementname, value ) {
      var escope = angular.element( elementname ).scope();
      if( typeof escope != "undefined" ) {
        escope.$apply( function() {
            escope.member = value;
            console.log(escope.member);
        });
      }
    }
 

